# ETH Deposit Tracker Application

## Overview

The ETH Deposit Tracker Application is a Python-based tool that monitors deposits to the Ethereum Beacon Deposit Contract and sends notifications via Telegram. It utilizes Docker for containerization and Prometheus for monitoring metrics.

## Prerequisites

- **Docker**: Ensure Docker is installed on your machine. [Download Docker](https://www.docker.com/get-started)
- **Docker Compose** (optional): Useful for managing multi-container Docker applications

## Setup Instructions

### 1. Clone the Repository

Clone the repository containing the ETH Deposit Tracker Application folder:

```bash
git clone <repository-url>
cd ETH\ Deposit\ Tracker\ Application/python-image
```

### 2. Environment Variables

Create a `.env` file in the `python-image` directory with the following content:

```
ALCHEMY_RPC_URL=<Your Alchemy RPC URL>
TELEGRAM_API_TOKEN=<Your Telegram Bot API Token>
TELEGRAM_CHAT_ID=<Your Telegram Chat ID>
```

Replace the placeholders with your actual values.

### 3. Build the Docker Image

```bash
docker build -t 1ethapp .
```

### 4. Run the Docker Container

```bash
docker run --name 1ethapp --env-file .env -d 1ethapp
```

If you encounter a conflict with the container name, remove the existing container:

```bash
docker stop 1ethapp
docker rm 1ethapp
```

Then run the container again.

## Application Structure

- `app.py`: Main application file containing the deposit tracking logic
- `Dockerfile`: Instructions for building the Docker image
- `requirements.txt`: List of Python dependencies

## Key Features

- Monitors Ethereum Beacon Deposit Contract for new deposits
- Sends notifications via Telegram for each new deposit
- Uses Prometheus for monitoring and metrics collection
- Implements exponential backoff for handling network issues

## Logging

The application logs its activities to both a file (`deposit_tracker.log`) and the console. You can view the logs using:

```bash
docker logs 1ethapp
```

## Customization

You can modify the following aspects of the application:

- Adjust the polling interval in the `monitor_deposits` function
- Customize the Telegram notification message format in the `notify_new_deposits` function
- Add additional metrics to the Prometheus registry as needed



## Application Structure

- `app.py`: Main application file containing the deposit tracking logic
- `Dockerfile`: Instructions for building the Docker image
- `requirements.txt`: List of Python dependencies

## Code Explanation: app.py

The `app.py` file contains the core functionality of the ETH Deposit Tracker. Here's a breakdown of its main components:

### Imports and Setup

```python
import os
from prometheus_client import CollectorRegistry, Gauge, push_to_gateway
from datetime import datetime
import requests
from typing import List
from dataclasses import dataclass
from web3 import Web3
from dotenv import load_dotenv
import logging
import time
from requests.exceptions import RequestException, HTTPError
```

This section imports necessary libraries for Ethereum interaction, HTTP requests, logging, and Prometheus metrics.

### Environment Variables

```python
load_dotenv()
TELEGRAM_API_TOKEN = os.getenv('TELEGRAM_API_TOKEN')
TELEGRAM_CHAT_ID = os.getenv('TELEGRAM_CHAT_ID')
```

Loads environment variables from the `.env` file, including Telegram API credentials.

### Prometheus Setup

```python
registry = CollectorRegistry()
g_deposits = Gauge('new_deposits_total', 'Total number of new deposits', registry=registry)
```

Sets up Prometheus metrics to monitor the total number of new deposits.

### Logging Configuration

```python
logging.basicConfig(
    level=logging.INFO,
    format="%(asctime)s [%(levelname)s] %(message)s",
    handlers=[
        logging.FileHandler("deposit_tracker.log"),
        logging.StreamHandler()
    ]
)
```

Configures logging to output both to a file and the console.

### Ethereum Connection

```python
RPC_URL = os.getenv("ALCHEMY_RPC_URL")
w3 = Web3(Web3.HTTPProvider(RPC_URL))
```

Establishes a connection to the Ethereum network using the provided RPC URL.

### Key Functions

1. `exponential_backoff`: Implements retry logic with exponential backoff for handling network issues.

2. `fetch_deposit_events`: Retrieves deposit events from the Ethereum blockchain.

3. `monitor_deposits`: The main loop that continuously checks for new deposits.

4. `save_deposits`: Placeholder function for saving deposit details (to be implemented as needed).

5. `notify_new_deposits`: Processes new deposits and sends notifications.

6. `send_telegram_notification`: Sends notifications to a Telegram chat.

### Main Execution

```python
def main():
    if not w3.is_connected():
        logging.error("Failed to connect to Ethereum network")
        return

    start_block = w3.eth.get_block_number()
    logging.info(f"Connected to Ethereum network. Latest block: {start_block}")
    logging.info(f"Starting deposit tracking from block {start_block}")
    send_telegram_notification("ETH Deposit Tracker Starting: - ")
    monitor_deposits(start_block)

if __name__ == "__main__":
    main()
```

The `main` function initializes the connection to Ethereum, logs the starting block, sends an initial Telegram notification, and starts the deposit monitoring process.

## Output 

```bash
Starting deposit tracking from block 20715701
Current block: 20715701
Fetching logs from block 20715400 to block 20715701
Filter parameters: {'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'fromBlock': 20715400, 'toBlock': 20715701}
Filter parameters: {'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'fromBlock': 20715400, 'toBlock': 20715701}
Fetched 10 logs from blocks 20715400 to 20715701.
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x78ca96efc57e3dceca28f9c50afd0b2a28c9fff8e5de27057416a72bf8b8b946'), 'blockNumber': 20715410, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000003098ebf0d636093e5b920ee8b5aa1dc050f3f7a52d15c2aa9352df9b196cb397c31bf17ef94311945bd4e100294c2a9d7d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002001000000000000000000000041e9771bc224b7a9e145ae90ce2ec96fb28d0efb000000000000000000000000000000000000000000000000000000000000000800405973070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060b77465d13658f472f74f672bf15e7026a12d7cc0b5a60b43b09c702396bfb9e5ea8a84dc0d95a7298c11871fe040fa340308a67efed599d6d6893239d10dd2e2525b910001921ed6b4da74dc2de64b462f1764f05623146c8b77f0e6e5e0a87000000000000000000000000000000000000000000000000000000000000000082391190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 212, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0x301f030785c208cf6802032263a19c714730dd5baaf66cc35822b44326512e6c'), 'transactionIndex': 53})
Processed deposit: Deposit(block_number=20715410, block_timestamp=1725913331, fee=0.0, hash='301f030785c208cf6802032263a19c714730dd5baaf66cc35822b44326512e6c', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x2dc838f5388a49b9caaf6db75e01c98a60ead6549b15e8e24929077ac03278f9'), 'blockNumber': 20715542, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000030b5e2e40b6243713defa8b680c4f3c84406ef5f4cebe019925309911f095c63d88024f7b4153961772722d8a67c682824000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020010000000000000000000000737a2824fd2fa781c0a8638126cf8f59a8abab9e000000000000000000000000000000000000000000000000000000000000000800405973070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060ac48e159e095c55cc8454b4a7765ab7b3f4b2ab766eece5ebc055e9c0d19dc8813ecf9cd324c1f81463760e1064a460c028e5f8ed0c31d02a30d2a3f74a0aacbcd13639e9c9ca5f7f80aa36e65c97de16914db537a5497deb1f791a630d728c900000000000000000000000000000000000000000000000000000000000000082491190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 117, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0x8c267d80b6afa7cd90ba0fbc91399ea8292b09e223fe31a14e588686164bfa5e'), 'transactionIndex': 63})
Processed deposit: Deposit(block_number=20715542, block_timestamp=1725914927, fee=0.0, hash='8c267d80b6afa7cd90ba0fbc91399ea8292b09e223fe31a14e588686164bfa5e', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x3781b5be3e79c69a91da1f4c81edbb116e0fb3fcf8dbd041a5b04cde2db4cd2f'), 'blockNumber': 20715549, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000308845acf5d8448b8000de1784a88adc95a025bd4650b87f9a96868964a599a5e586bd1fb26a5fa684647b992d6591f8f60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200100000000000000000000002b78035514401ed1592eb691b8673a93edf97470000000000000000000000000000000000000000000000000000000000000000800405973070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060abba7664ccd41d42bca91364f87b7a6c4d649b2f979811322a4a68ebd7430651e39372eb796ff5195e1e4440be2083b7151549b6a53bdb0923c11410ac23afaba91a14f7eae2487990c02df8f026ee660e06503c53b1be44bfbec9388bc6f48800000000000000000000000000000000000000000000000000000000000000082591190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 438, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0xae4c79921a6e57c00fd6363191623e3d42945dfa0c137225be83f69605914afe'), 'transactionIndex': 230})
Processed deposit: Deposit(block_number=20715549, block_timestamp=1725915011, fee=0.0, hash='ae4c79921a6e57c00fd6363191623e3d42945dfa0c137225be83f69605914afe', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x5b0d155289ca59604a2859962c8b16393461b291ce7ee15bd1397ad3bb4f2077'), 'blockNumber': 20715577, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000030a6b7523b9449f6b95df0746ccdb0fdb313aca5dfcc2392bdbc782a998b7b09dec30b8ed2c683c92120b8fe7ff5a219f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020010000000000000000000000004c26816da9219cf3408e84edd9716df4b5739a000000000000000000000000000000000000000000000000000000000000000800405973070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060a302ddd0c192d2a843fc372b54729c45d091fa608520aa367436dc549fb0fc0c7281afa0192a2f303487dc6c4465530418312c2ad7c3f1dd86dcb604ab849998cd5d6a5883f3479d8a5ba13dbe20b7752d7ab2a30c3dd4ab370219ac8818682200000000000000000000000000000000000000000000000000000000000000082691190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 263, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0x7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b'), 'transactionIndex': 78})
Processed deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x5b0d155289ca59604a2859962c8b16393461b291ce7ee15bd1397ad3bb4f2077'), 'blockNumber': 20715577, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000030b5ab2b7719adfcd176c4a662c840209349ded4e798bda3eb84ce2a84afaec0cc338069b204adfdf21795fc9e4fbd4c10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020010000000000000000000000004c26816da9219cf3408e84edd9716df4b5739a0000000000000000000000000000000000000000000000000000000000000008004059730700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000608ebc849b425098bbd198fcef9f95edff3bc0678194ae1a17b9a21d5acb29ed836d28f7943d5ad36a558e16f96198c47e0a60d07c5a0e002f25b5f18f89c1380790a4167d422c4e57320bb12cde07e30c17c2d03a7071ad952f4c5dc5db526ddd00000000000000000000000000000000000000000000000000000000000000082791190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 264, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0x7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b'), 'transactionIndex': 78})
Processed deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x5b0d155289ca59604a2859962c8b16393461b291ce7ee15bd1397ad3bb4f2077'), 'blockNumber': 20715577, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000030a71a909b2941726c177160d2e61a2a3074638f93a09d4b81b034fa475decb2b76634c3c23cb8cc9783dd41b74336a030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020010000000000000000000000004c26816da9219cf3408e84edd9716df4b5739a0000000000000000000000000000000000000000000000000000000000000008004059730700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000608a27d2828c123d377ff3e3cbafeaecc28459161f6fc85996cf9a3c8b82184bcc259500183d63f7a9075286810d68de7402e5db73b11aadeb5bb346e502f901bc0e3924f225bdcf12963c35881556d51c91b498b09898488d3292708851bcf1d800000000000000000000000000000000000000000000000000000000000000082891190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 265, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0x7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b'), 'transactionIndex': 78})
Processed deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x5b0d155289ca59604a2859962c8b16393461b291ce7ee15bd1397ad3bb4f2077'), 'blockNumber': 20715577, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001800000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000003095d5a8eee736373df98f5c8b857acf778dc3975f2acc5e063a0c70e6bbdfa2113cd7ea207fb948aa55c85bacb77096c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020010000000000000000000000004c26816da9219cf3408e84edd9716df4b5739a000000000000000000000000000000000000000000000000000000000000000800405973070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060b4f2933ed70e4d16de8f7b0b1c00cda72913a0995c0ba2f3b2fbd78ca6e293fec484548dc3831c3e06193c9ac0112316162f70ee5ac0e13e633e63be0733edb252f2598592e70318de37ac6763f2e175eecf880046beb0b97f3112df5366177100000000000000000000000000000000000000000000000000000000000000082991190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 266, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0x7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b'), 'transactionIndex': 78})
Processed deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x5b0d155289ca59604a2859962c8b16393461b291ce7ee15bd1397ad3bb4f2077'), 'blockNumber': 20715577, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000308f75be052f17dcf470de040ecc0dc00680efe7390582b5c4e5edd322806f2b4678d8cd68beb37f1c7d72e096aad16a87000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020010000000000000000000000004c26816da9219cf3408e84edd9716df4b5739a000000000000000000000000000000000000000000000000000000000000000800405973070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060a0392a5c7c5317f819a27725ffe1e0c046f7ffd2e0d5ed16bc07cfba53e0f0194a0e1d6dcc82a15b0adb2197b465036418753041548e7b12055aabf63e099a103f4294aa577252c8bd505ed8bd613c8fc21ef511cca9f552a66b589965650f2f00000000000000000000000000000000000000000000000000000000000000082a91190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 267, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0x7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b'), 'transactionIndex': 78})
Processed deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x5b0d155289ca59604a2859962c8b16393461b291ce7ee15bd1397ad3bb4f2077'), 'blockNumber': 20715577, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000030afdc07083b1af7e30d0781565b7cbb81761b148fef475e8d8c1f505dfe3013aeb07434762ec4423b4dda44c3a976657b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020010000000000000000000000004c26816da9219cf3408e84edd9716df4b5739a000000000000000000000000000000000000000000000000000000000000000800405973070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060afcf7ec9937b0867cc914c83c4db311f1c4f98f633ca1abfe4e9fbdf294465869a765ed24b975cad294f173559da8cf803307cec65d4012d51863c25f3859686a3bd2434b980ddb54dcac76a6adfe81704f3f86c377bec200af0cea45220c65d00000000000000000000000000000000000000000000000000000000000000082b91190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 268, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0x7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b'), 'transactionIndex': 78})
Processed deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Raw log data: AttributeDict({'address': '0x00000000219ab540356cBB839Cbe05303d7705Fa', 'blockHash': HexBytes('0x698160adc7d2689b3048bc738723a133dbf65c70dc6a1f56344111cf32461d80'), 'blockNumber': 20715629, 'data': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001400000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000308a5211cdf3c48c4a13ee60a1a5aadad40756fd11147612b93bc39aede5455ae2071a854a853439c8705e7d924d9d1968000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020010000000000000000000000b23c002bc65c6bb539aad4c11d606ef4f5502c930000000000000000000000000000000000000000000000000000000000000008004059730700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000609215a01ca3915c7cc79b1471ea71276a805b89f51a218af138867d814886762f8f543bee53d4a2c753bcc1ece6f7af9f17d422022a3082cf64f41d0a7efceae6dc56018f7f9a85fbbf868fd71d9ffe80d0ed9b82ee94bfaed00e87b79cff446800000000000000000000000000000000000000000000000000000000000000082c91190000000000000000000000000000000000000000000000000000000000'), 'logIndex': 40, 'removed': False, 'topics': [HexBytes('0x649bbc62d0e31342afea4e5cd82d4049e7e1ee912fc0889aa790803be39038c5')], 'transactionHash': HexBytes('0xf18e35cb0a012d6b7e38773f91c3de8a2b716a9dde0c850e6c4a782ed120aed6'), 'transactionIndex': 32})
Processed deposit: Deposit(block_number=20715629, block_timestamp=1725915971, fee=0.0, hash='f18e35cb0a012d6b7e38773f91c3de8a2b716a9dde0c850e6c4a782ed120aed6', pubkey='N/A')
Found 10 new deposits.
Deposit(block_number=20715410, block_timestamp=1725913331, fee=0.0, hash='301f030785c208cf6802032263a19c714730dd5baaf66cc35822b44326512e6c', pubkey='N/A')
Deposit(block_number=20715542, block_timestamp=1725914927, fee=0.0, hash='8c267d80b6afa7cd90ba0fbc91399ea8292b09e223fe31a14e588686164bfa5e', pubkey='N/A')
Deposit(block_number=20715549, block_timestamp=1725915011, fee=0.0, hash='ae4c79921a6e57c00fd6363191623e3d42945dfa0c137225be83f69605914afe', pubkey='N/A')
Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Deposit(block_number=20715629, block_timestamp=1725915971, fee=0.0, hash='f18e35cb0a012d6b7e38773f91c3de8a2b716a9dde0c850e6c4a782ed120aed6', pubkey='N/A')
Saving deposit: Deposit(block_number=20715410, block_timestamp=1725913331, fee=0.0, hash='301f030785c208cf6802032263a19c714730dd5baaf66cc35822b44326512e6c', pubkey='N/A')
Saving deposit: Deposit(block_number=20715542, block_timestamp=1725914927, fee=0.0, hash='8c267d80b6afa7cd90ba0fbc91399ea8292b09e223fe31a14e588686164bfa5e', pubkey='N/A')
Saving deposit: Deposit(block_number=20715549, block_timestamp=1725915011, fee=0.0, hash='ae4c79921a6e57c00fd6363191623e3d42945dfa0c137225be83f69605914afe', pubkey='N/A')
Saving deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Saving deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Saving deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Saving deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Saving deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Saving deposit: Deposit(block_number=20715577, block_timestamp=1725915347, fee=0.0, hash='7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b', pubkey='N/A')
Saving deposit: Deposit(block_number=20715629, block_timestamp=1725915971, fee=0.0, hash='f18e35cb0a012d6b7e38773f91c3de8a2b716a9dde0c850e6c4a782ed120aed6', pubkey='N/A')
New deposit detected:
Block Number: 20715410
Block Timestamp: 2024-09-10 01:52:11
Fee: 0.0 ETH
Hash: 301f030785c208cf6802032263a19c714730dd5baaf66cc35822b44326512e6c
Pubkey: N/A
New deposit detected:
Block Number: 20715542
Block Timestamp: 2024-09-10 02:18:47
Fee: 0.0 ETH
Hash: 8c267d80b6afa7cd90ba0fbc91399ea8292b09e223fe31a14e588686164bfa5e
Pubkey: N/A
New deposit detected:
Block Number: 20715549
Block Timestamp: 2024-09-10 02:20:11
Fee: 0.0 ETH
Hash: ae4c79921a6e57c00fd6363191623e3d42945dfa0c137225be83f69605914afe
Pubkey: N/A
New deposit detected:
Block Number: 20715577
Block Timestamp: 2024-09-10 02:25:47
Fee: 0.0 ETH
Hash: 7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b
Pubkey: N/A
New deposit detected:
Block Number: 20715577
Block Timestamp: 2024-09-10 02:25:47
Fee: 0.0 ETH
Hash: 7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b
Pubkey: N/A
New deposit detected:
Block Number: 20715577
Block Timestamp: 2024-09-10 02:25:47
Fee: 0.0 ETH
Hash: 7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b
Pubkey: N/A
New deposit detected:
Block Number: 20715577
Block Timestamp: 2024-09-10 02:25:47
Fee: 0.0 ETH
Hash: 7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b
Pubkey: N/A
New deposit detected:
Block Number: 20715577
Block Timestamp: 2024-09-10 02:25:47
Fee: 0.0 ETH
Hash: 7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b
Pubkey: N/A
New deposit detected:
Block Number: 20715577
Block Timestamp: 2024-09-10 02:25:47
Fee: 0.0 ETH
Hash: 7831b6e27ba2f5e006e7d0e0f2089b5c0921dcd58d45f1b51e2673f2aa3cc41b
Pubkey: N/A
New deposit detected:
Block Number: 20715629
Block Timestamp: 2024-09-10 02:36:11
Fee: 0.0 ETH
Hash: f18e35cb0a012d6b7e38773f91c3de8a2b716a9dde0c850e6c4a782ed120aed6
Pubkey: N/A
Current block: 20715702
```

## Customization

You can modify the following aspects of the application:

- Adjust the polling interval in the `monitor_deposits` function
- Customize the Telegram notification message format in the `notify_new_deposits` function
- Add additional metrics to the Prometheus registry as needed

## Troubleshooting

If you encounter issues:

1. Ensure all environment variables are correctly set in the `.env` file
2. Check the application logs for error messages
3. Verify your Ethereum RPC URL is valid and accessible
4. Confirm your Telegram bot token and chat ID are correct

